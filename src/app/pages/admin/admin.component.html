<main>

    <h1 class="center">Ajouter une recette</h1>

    <div class="form-box">

        <form [formGroup]="recipe_form" (ngSubmit)="addRecipe()">

            <div>
                <label for="title">Titre :
                    <input placeholder="Titre" formControlName="title" id="title" type="text" required>
                </label>
            </div>

            <div>
                <label for="idCategory">Catégorie : </label>
                <div class="select-container">
                    <select formControlName="idCategory" id="idCategory">
                        <option value="">-</option>
						<option value="">Entrée</option>
                        <option value="">Plat</option>
                        <option value="">Désert</option>
                        <!-- <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.title }}</option> -->
                    </select>
                    <div class="arrow-down"></div>
                </div>
            </div>

            <div>
                <label for="numberPeople">Nombre de personnes :
                    <input placeholder="Nombre de personnes" formControlName="numberPeople" id="numberPeople" type="number" required>
                </label>
            </div>

            <div>
                <label for="duration">Durée :
                    <input placeholder="Durée" formControlName="duration" id="duration" type="number" required>
                </label>
            </div>

            <div>
                <label for="picture">Photo :
                    <input placeholder="Photo" formControlName="picture" id="picture" type="text" required>
                </label>
            </div>

            <div>
                <label for="idNutrition">Régime : </label>
                <div class="select-container">
                    <select formControlName="idNutrition" id="idNutrition">
                        <option value="0">-</option>

                        @for (nut of nutritions; track nut) {
                            <option [value]="nut.id">{{nut.title}}</option>
                        }
                        @empty {
                            <option value="1">Végétarisme</option>
                            <option value="2">Sans lactose</option>
                            <option value="3">Sans gluten</option>
                        }
                    </select>
                    <div class="arrow-down"></div>
                </div>
            </div>


            <div>
                <label for="ingredient">Ingrédients : </label>
                <div class="select-input-container">
                    <div class="select-container">
                        <select formControlName="ingredient" id="ingredient">
                            <option value="">-</option>

                            @for (ing of ingredients; track ing) {
                                <option [value]="ing.id">{{ing.title}}</option>
                            }
                            @empty {
                                <option value="">Sucre</option>
                                <option value="">Sel</option>
                                <option value="">Oeuf</option>
                                <option value="">Lait</option>
                                <option value="">Pomme</option>
                                <option value="">Poire</option>
                                <option value="">Farine</option>
                                <option value="">Huile</option>
                                <option value="">Beurre</option>
                            }
                        </select>
                        <div class="arrow-down"></div>
                    </div>
                    <div class="mini-input-container">
                        <label for="quantity">
                            <input formControlName="quantity" id="quantity" type="number" class="mini-input" required>
                            <div class="icon-gr">gr/ml</div>
                        </label>
                    </div>
                </div>

                <button type="button" (click)="addIngredient()" class="micro-btn">Ajouter un ingrédient</button>
            </div>


            <!-- <div>
                <label for="ingredients">Ingrédients :</label>
                <div formArrayName="ingredients">
                    @for (ingredient of ingredients; track ingredient; let i = index) {
                    <div [formGroupName]="i" class="select-input-container">
                        <div class="select-container">
                            <select formControlName="id" id="ingredient-{{i}}">
                                <option value="">-</option>
                                @for (ing of ingredients; track ing) {
                                    <option *ngFor="let ing of ingredients" [value]="ing.id">{{ ing.title }}</option>
                                }
                                @empty {
                                    <option value="1">Sucre</option>
                                    <option value="2">Sel</option>
                                    <option value="3">Oeuf</option>
                                    <option value="4">Lait</option>
                                    <option value="5">Pomme</option>
                                    <option value="6">Poire</option>
                                    <option value="7">Farine</option>
                                    <option value="8">Huile</option>
                                    <option value="9">Beurre</option>
                                }
                            </select>
                            <div class="arrow-down"></div>
                        </div>
                        <div class="mini-input-container">
                            <label for="quantity-{{i}}">
                                <input formControlName="quantity" id="quantity-{{i}}" type="number" class="mini-input" placeholder="Quantité" required>
                                <div class="icon-gr">gr/ml</div>
                            </label>
                        </div>
                        <button type="button" (click)="removeIngredient(i)" class="micro-btn">Supprimer</button>
                    </div>
                    }
                </div>
                
                <button type="button" (click)="addIngredient()" class="micro-btn">Ajouter un ingrédient</button>
            </div> -->
            

			<div>
                <label for="description">Description :</label>
                <textarea formControlName="description" id="description"></textarea>
            </div>



            <div>
                <label for="instructions">Instructions :</label>
                <textarea formControlName="instructions" id="instructions"></textarea>

                <button type="button" (click)="addInstruction()" class="micro-btn">Ajouter une instruction</button>
            </div>


            <!-- <div>
                <label for="instructions">Instructions :</label>
                <div formArrayName="instructions">
                    @for (instruction of instructions; track instruction; let i = index) {
                    <div [formGroupName]="{{i}}" class="instruction-container">
                        <textarea formControlName="text" id="instruction-{{i}}" placeholder="Instruction" required></textarea>
                        <button type="button" (click)="removeInstruction(i)" class="micro-btn">Supprimer</button>
                    </div>
                    }
                </div>
            
                <button type="button" (click)="addInstruction()" class="micro-btn">Ajouter une instruction</button>
            </div> -->


            <div class="right">
                <button class="btn btn-success" type="submit">Valider</button>
            </div>

        </form>

    </div>

</main>
