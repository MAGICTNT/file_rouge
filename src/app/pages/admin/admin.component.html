<main>

    <h1 class="center">Ajouter une recette</h1>

    <div class="form-box">

        <form [formGroup]="recipe_form" (ngSubmit)="addRecipe()">

            <div>
                <label for="title">Titre :
                    <input placeholder="Titre" formControlName="title" id="title" type="text" required>
                </label>
            </div>

            <div>
                <label for="idCategory">Catégorie : </label>
                <div class="select-container">
                    <select formControlName="idCategory" id="idCategory">
                        <option value="">-</option>
                        <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.title }}</option>
                    </select>
                    <div class="arrow-down"></div>
                </div>
            </div>

            <div>
                <label for="numberPeople">Nombre de personnes :
                    <input placeholder="Nombre de personnes" formControlName="numberPeople" id="numberPeople" type="number" required>
                </label>
            </div>

            <div>
                <label for="duration">Durée :
                    <input placeholder="Durée" formControlName="duration" id="duration" type="number" required>
                </label>
            </div>

            <div>
                <label for="picture">Photo :
                    <input placeholder="Photo" formControlName="picture" id="picture" type="text" required>
                </label>
            </div>

            <div>
                <label for="idNutrition">Régime : </label>
                <div class="select-container">
                    <select formControlName="idNutrition" id="idNutrition">
                        <option value="">-</option>
                        <option *ngFor="let nut of nutritions" [value]="nut.id">{{ nut.title }}</option>
                    </select>
                    <div class="arrow-down"></div>
                </div>
            </div>

            <h3>Ingrédients :</h3>

            <div formArrayName="ingredients" id="ingredients_container">
                <div *ngFor="let ingredient of ingredientsArray.controls; let i = index" [formGroupName]="i">
                    <label for="ingredient">Ingrédient :</label>
                    <div class="select-input-container">
                        <div class="select-container">
                            <select formControlName="id" [id]="'ingredient-' + i">
                                <option value="">-</option>
                                <option *ngFor="let ing of ingredients" [value]="ing.id">{{ ing.title }}</option>
                            </select>
                            <div class="arrow-down"></div>
                        </div>
                        <div class="mini-input-container">
                            <label for="quantity-{{ i }}">
                                <input formControlName="quantity" [id]="'quantity-' + i" type="number" class="mini-input" required>
                                <div class="icon-gr">gr/ml</div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" (click)="addIngredient()" class="micro-btn">Ajouter un ingrédient</button>
            <button type="button" (click)="deleteIngredient()" class="micro-btn">Supprimer le dernier ingrédient</button>

            <div>
                <label for="description">Description :</label>
                <textarea formControlName="description" id="description"></textarea>
            </div>

            <h3>Instructions :</h3>

            <div formArrayName="instructions" id="instructions_container">
                <div *ngFor="let instruction of instructions.controls; let i = index" [formGroupName]="i">
                    <label [for]="'instruction' + (i + 1)">Étape {{ i + 1 }} :</label>
                    <textarea formControlName="text" [id]="'instruction' + (i + 1)" required></textarea>
                </div>
            </div>

            <button type="button" (click)="addInstruction()" class="micro-btn">Ajouter une étape</button>
            <button type="button" (click)="deleteInstruction()" class="micro-btn">Supprimer la dernière étape</button>

            <div class="right">
                <button class="btn btn-success" type="submit">Valider</button>
            </div>

        </form>

    </div>

</main>